@using Esfa.Recruit.Shared.Web.TagHelpers

@model Esfa.Recruit.Employer.Web.ViewModels.Vacancies.ListAllVacanciesViewModel

@{
    ViewBag.Vpv = "/recruitment/employer/page-vacancies";
    ViewBag.Title = "Your adverts";
}

<partial name="@PartialNames.Alerts" for="Alerts" />

<div asp-show="Model.HasWarning" class="das-notification das-notification--warning">
    <p class="das-notification__body">@Model.WarningMessage</p>
</div>

<govuk-banner asp-show="Model.HasInfo" type="BannerStyle.Success">
    <govuk-banner-heading>@Model.InfoMessage</govuk-banner-heading>
</govuk-banner>

@section BackLink
{
    <a asp-hide="@Model.ShowReferredFromMaBackLink" asp-route="@RouteNames.Dashboard_Get" asp-route-employerAccountId="@Model.EmployerAccountId" esfa-automation="link-back" class="govuk-back-link">Return to recruitment dashboard</a>
    <a asp-show="@Model.ShowReferredFromMaBackLink" asp-route="@RouteNames.Dashboard_Account_Home" asp-route-employerAccountId="@Model.EmployerAccountId" esfa-automation="link-back" class="govuk-back-link">Return to home</a>
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">All adverts</h1>
    </div>
</div>

@if (Model is { ListViewModel.Vacancies.Count: > 0 } || !string.IsNullOrWhiteSpace(Model.SearchTerm))
{
    <form method="get" autocomplete="off" asp-route-employerAccountId="@Model.EmployerAccountId">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div class="govuk-form-group">
                    <label for="search-input" class="govuk-label">
                        Search by advert title or reference number
                    </label>
                    <div class="das-search-form__group">
                        <input id="search-input" asp-for="SearchTerm" title="Search" class="govuk-input das-search-form__input _app-vacancy-autocomplete" type="text" maxlength="200">
                        <div class="das-search-form__button-wrap">
                            <button class="govuk-button das-search-form__button" type="submit">
                                Search
                            </button>
                        </div>
                    </div>
                    <div class="govuk-!-font-weight-bold govuk-!-margin-top-2 govuk-body">
                        @Model.ResultsHeading
                    </div>
                </div>
            </div>
        </div>
    </form>
}

@if (Model is { ListViewModel.Vacancies.Count: > 0 })
{
    <partial model="@Model.ListViewModel" name="_VacancyList" />
}
else
{
    <p class="govuk-body">No vacancies match the criteria</p>
}