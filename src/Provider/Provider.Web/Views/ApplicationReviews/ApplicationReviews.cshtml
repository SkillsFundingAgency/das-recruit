@using System.Net
@using Esfa.Recruit.Vacancies.Client.Infrastructure.QueryStore.Projections.VacancyApplications;
@model Esfa.Recruit.Provider.Web.ViewModels.ApplicationReviews.ShareMultipleApplicationReviewsViewModel

<div class="govuk-grid-row"> 
    <div class="govuk-grid-column-two-thirds">

        <form method="post" asp-route="@RouteNames.ApplicationReviewsToShare_Post" asp-route-vacancyId="@Model.VacancyId">
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-visually-hidden">Select the applications that you want to share</legend>
                    <table class="govuk-table">

                        <thead class="govuk-table__head" aria-label="Share applications">
                            <tr class="govuk-table__row">
                                <th scope="col" class="govuk-table__header das-table-cell-width-5">

                                </th>
                                <th scope="col" class="govuk-table__header das-table-cell-width-20">
                                    <sortable-column column-name="Applicant" column-label="Applicant" default="false" default-order="Ascending"></sortable-column>
                                </th>
                                <th scope="col" class="govuk-table__header das-table-cell-width-15">
                                    <sortable-column column-name="ApplicationID" column-label="ApplicationID" default="false" default-order="Ascending"></sortable-column>
                                </th>
                                <th scope="col" class="govuk-table__header status das-table-cell-width-15">
                                    <sortable-column column-name="Status" column-label="Status" default="false" default-order="Descending"></sortable-column>
                                </th>
                                <th scope="col" class="govuk-table__header">
                                    <sortable-column column-name="DateApplied" column-label="Applicant" default="false" default-order="Ascending"></sortable-column>
                                </th>
                            </tr>
                        </thead>

                        <tbody class="govuk-table__body">
                            @{
                                foreach (VacancyApplication vacancyApplication in Model.VacancyApplications)
                                {
                                    <tr class="govuk-table__row">
                                        <td class="govuk-table__cell">

                                            <div class="govuk-checkboxes govuk-checkboxes--small" das-highlight-error-for="@vacancyApplication.ApplicationReviewId" error-class="govuk-form-group--error">
                                                    <div class="govuk-checkboxes__item">
                                                    <input class="govuk-checkboxes__input" id="application_select_@vacancyApplication.ApplicationReviewId" error-class="govuk-input--error" name="ApplicationsToShare" type="checkbox" value="@vacancyApplication.ApplicationReviewId">
                                                    <label class="govuk-label govuk-checkboxes__label" for="application_select_@vacancyApplication.ApplicationReviewId">
                                                        <span class="govuk-visually-hidden">@vacancyApplication.CandidateName</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            
                                        </td>
                                        <td class="govuk-table__cell">@vacancyApplication.CandidateName</td>
                                        <td class="govuk-table__cell">@vacancyApplication.ApplicationReviewId</td>
                                        <td class="govuk-table__cell">@vacancyApplication.Status</td>
                                        <td class="govuk-table__cell">@vacancyApplication.SubmittedDate</td>
                                    </tr>
                                }
                            }
                        </tbody>

                    </table>

                 </fieldset>
             </div>

             <button class="govuk-button submit" type="submit">Save and continue</button>

           </form>
    </div>
</div>